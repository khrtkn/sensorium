# 実装タスク分解

---

## 1. インフラストラクチャ構築

-   [ ] **Kubernetes クラスター構築**
    -   GPU ノード（AV1 トランスコード用）を含むノードプール準備
    -   Node Auto-scaling 設定
-   [ ] **Terraform IaC 設計・実装**
    -   クラスタ、VPC、ロードバランサー、RDS／Redis／IPFS ノード定義
    -   Cloudflare R2 / CDN 設定

---

## 2. コレクターサービス

-   [ ] **カメラ一覧取得モジュール**
    -   EarthCam, Windy, 自治体オープンカメラ API クライアント実装
    -   定期（cron）クローリングと差分検知
-   [ ] **メタデータ正規化**
    -   地理位置／URL／ライセンス情報を PostgreSQL に格納
    -   バリデーション & リトライ機構

---

## 3. トランスコーダー & C2PA 署名

-   [ ] **FFmpeg GPU トランスコードパイプライン**
    -   AV1 (CQ 37) + Opus 変換スクリプト
-   [ ] **C2PA マニフェスト付与**
    -   `c2pa-node` 組み込み（動画フレーム毎の署名）
    -   テスト用署名付きサンプル生成

---

## 4. プロビナンスパイプライン

-   [ ] **HLS セグメント永続化**
    -   IPFS ピン留めスクリプト
    -   Arweave へのバッチ書き込み
-   [ ] **改ざん検証 API**
    -   `c2pa-js` サーバーサイド検証モジュール
    -   フロント用バッジ状態エンドポイント

---

## 5. ストリーミング基盤（Live Layer）

-   [ ] **LiveKit SFU デプロイ**
    -   Go + Redis クラスタ構成
    -   Simulcast 設定・テスト
-   [ ] **HLS フォールバック生成**
    -   HLS v4 セグメンテーション & CDN 配信パイプライン
-   [ ] **WebTransport メタデータチャネル**
    -   HTTP/3 DataChannel サーバ実装
    -   カメラ位置／天気／感情データ送信

---

## 6. メタデータ基盤

-   [ ] **気象情報取得モジュール**
    -   OpenWeather API クライアント + キャッシュ
-   [ ] **SNS 感情解析パイプライン**
    -   Twitter/X ストリーミング取得
    -   Sentiment モデル（Python ML）で 1 Hz 集計
    -   Redis Pub/Sub 連携

---

## 7. フロントエンド開発（Sensorium Layer）

-   [ ] **プロジェクト土台整備**
    -   React + Zustand + Vite 構成
    -   `c2pa-js` バンドル設定
-   [ ] **3D 地球儀ビューア**
    -   Three.js WebGPURenderer 初期化
    -   Pin クラスタリング & レンダリング最適化
-   [ ] **ランダム視点アルゴリズム**
    -   昼夜／人口密度重み付けロジック
    -   30s 毎自動ジャンプ UI
-   [ ] **グループセッション UI**
    -   LiveKit DataChannel タイムコード同期
    -   セッション管理画面
-   [ ] **環境音ポジショナルオーディオ**
    -   WebAudio API で立体音響実装
-   [ ] **プライバシー保護（顔ブラー）**
    -   WASM OpenCV 組み込み
    -   ブラウザ上でリアルタイム検出 → マスク描画
-   [ ] **真正性バッジ表示**
    -   Provenance API 呼び出し／改ざんバッジ UI

---

## 8. テスト・QA

-   [ ] **ユニットテスト整備**
    -   各マイクロサービス REST API
    -   Transcoder／署名ロジック
-   [ ] **E2E テスト**
    -   ストリーム受信 → 再生 → Provenance 検証フロー
    -   フロント UI シナリオテスト
-   [ ] **パフォーマンステスト**
    -   WebGPU 描画負荷測定
    -   SFU 同時接続テスト

---

## 9. ドキュメンテーション

-   [ ] **API 仕様書（OpenAPI）**
-   [ ] **インフラ構成図**
-   [ ] **運用手順書**
-   [ ] **ユーザ向けクイックスタート**

---
